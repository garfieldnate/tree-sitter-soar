================================================================================
UnitTests/SoarTestAgents/Chunking/tests/arithmetic/arithmetic/process-column/compute-subtraction-result/compute-result.soar
================================================================================

## to subtract 1 from next column digit1 (prepared in elaboration)

sp {compute-result*propose*compute-result
   (state <s> ^name compute-subtraction-borrow-result
              ^digit1 <a1>
              ^digit2 { <= <a1> <a2> }
             -^result)
-->
   (<s> ^operator <op> + =)
   (<op> ^name compute-subtraction-no-borrow-result)
}


sp {compute-result*propose*subtraction-carry-result
   (state <s> ^name compute-subtraction-borrow-result
              ^digit1 <a1>
              ^digit2 { > <a1> <a2> }
             -^result)
-->
   (<s> ^operator <op> + =)
   (<op> ^name compute-subtraction-borrow-result)
}


### Add in the carry for addition will be done by process-column*apply*compute-result*addition
### Subtract the borrow will be done by process-column*apply*compute-result*subtraction

--------------------------------------------------------------------------------

(source_file
  (production
    (beginning
      (prod_name))
    (LHS
      (cond
        (positiveCond
          (condsForOneId
            (condType)
            (idTest
              (test
                (simpleTest
                  (singleTest
                    (variable)))))
            (attrValueTests
              (attrTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string)))))))
              (valueTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string))))))))
            (attrValueTests
              (attrTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string)))))))
              (valueTest
                (test
                  (simpleTest
                    (singleTest
                      (variable))))))
            (attrValueTests
              (attrTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string)))))))
              (valueTest
                (test
                  (conjunctiveTest
                    (simpleTest
                      (relationalTest
                        (relation)
                        (singleTest
                          (variable))))
                    (simpleTest
                      (singleTest
                        (variable)))))))
            (attrValueTests
              (attrTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string))))))))))))
    (action
      (variable)
      (attrValueMake
        (rhsValue
          (constant
            (symConstant
              (string))))
        (valueMake
          (rhsValue
            (variable))
          (preferenceSpecifier
            (unaryPreference))
          (preferenceSpecifier
            (unaryPreference
              (unaryOrBinaryPreference))))))
    (action
      (variable)
      (attrValueMake
        (rhsValue
          (constant
            (symConstant
              (string))))
        (valueMake
          (rhsValue
            (constant
              (symConstant
                (string))))))))
  (production
    (beginning
      (prod_name))
    (LHS
      (cond
        (positiveCond
          (condsForOneId
            (condType)
            (idTest
              (test
                (simpleTest
                  (singleTest
                    (variable)))))
            (attrValueTests
              (attrTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string)))))))
              (valueTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string))))))))
            (attrValueTests
              (attrTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string)))))))
              (valueTest
                (test
                  (simpleTest
                    (singleTest
                      (variable))))))
            (attrValueTests
              (attrTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string)))))))
              (valueTest
                (test
                  (conjunctiveTest
                    (simpleTest
                      (relationalTest
                        (relation)
                        (singleTest
                          (variable))))
                    (simpleTest
                      (singleTest
                        (variable)))))))
            (attrValueTests
              (attrTest
                (test
                  (simpleTest
                    (singleTest
                      (constant
                        (symConstant
                          (string))))))))))))
    (action
      (variable)
      (attrValueMake
        (rhsValue
          (constant
            (symConstant
              (string))))
        (valueMake
          (rhsValue
            (variable))
          (preferenceSpecifier
            (unaryPreference))
          (preferenceSpecifier
            (unaryPreference
              (unaryOrBinaryPreference))))))
    (action
      (variable)
      (attrValueMake
        (rhsValue
          (constant
            (symConstant
              (string))))
        (valueMake
          (rhsValue
            (constant
              (symConstant
                (string)))))))))
